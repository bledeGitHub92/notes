## 基本类型和引用类型的值

ECMAScript 变量可能包含两种不同数据类型的值：基本类型值和引用类型值。基本类型值指的是简单的数据段。引用类型值指那些可能由多个值构成的对象。

基本类型值保存在栈内存中。引用类型值保存在堆内存中。

### 复制变量值

复制基本类型值时，创建一个新值。之后的任何操作互不影响。

复制引用类型值时，实际上复制的是该引用类型的指针。两个变量指向对一个对象。改变一个变量会影响另一个变量。

### 传递参数

ECMAScript 中所有函数的参数都是按值传递的。也就是说，把函数外部的值传递给函数内部的参数，就和把值从一个变量复制到另外一个变量一样。

    function setName(obj) {
        obj.name = 'joe';
        obj = new Object();
        obj.name = 'rose';
    }

    var person = new Object();
    setName(person);
    alert(person.name);  // joe

### 检测类型

instanceof 操作符检测变量是什么类型的对象。

    result = variable instanceof constructor

## 执行环境及作用域

每个函数都有自己的执行环境。

执行环境定义了变量和函数有权访问的其他数据，决定了它们各自的行为。每个执行环境都有一个与之关联的变量对象，环境中定义的所有变量和函数都保存在这个对象当中。

当代码在一个环境中执行时，会创建变量对象的一个作用域链。作用域链的用途是保证对执行环境有权访问的所有变量和函数的有序访问。

作用域链的前端始终是当前代码所在环境的变量对象。如果这个环境是函数，则将其活动对象作为变量对象。活动对象最开始时只包含一个变量，即 arguments 对象。作用域链中的下一个变量对象来自其包含环境，而再下一个变量对象则来自下一个包含环境。这样，一直延伸到全局执行环境。

标识符解析是沿着作用域链一级一级地搜索标识符的过程。

某个执行环境中所有代码执行完毕后，该环境被销毁，保存在其中的所有变量和函数定义也随之销毁。（全局执行环境直到应用程序退出，如关闭网页或浏览器时才被销毁）。

### 延长作用域链

执行流进入下列任意一个语句时，会在作用域链的前端临时增加一个变量对象：

- try-catch 语句的 catch 块。
- with 语句。

对 with 语句来说，会将指定的对象添加到作用域链中。对 catch 语句来说，会创建一个新的变量对象，其中包含的是被抛出的错误对象的声明。

### 声明变量

使用 var 声明的变量会自动添加到最近的环境中。